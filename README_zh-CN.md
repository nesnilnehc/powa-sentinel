# powa-sentinel

[English](./README.md)

powa-sentinel æ˜¯ä¸€ä¸ªè½»é‡çº§ã€åªè¯»çš„ Sidecar æœåŠ¡ï¼Œä¸“ä¸º [PoWA (PostgreSQL Workload Analyzer)](https://github.com/powa-team/powa) è®¾è®¡ã€‚

å®ƒå®šæœŸåˆ†æ PoWA æ€§èƒ½ç»Ÿè®¡æ•°æ®ï¼Œå¹¶å°† **å¯æ“ä½œçš„æ€§èƒ½æ´å¯Ÿ** ä¸»åŠ¨æ¨é€åˆ°å¤–éƒ¨é€šçŸ¥æ¸ é“ï¼Œä¾‹å¦‚ **ä¼ä¸šå¾®ä¿¡ (WeCom)**ã€‚

æœ¬é¡¹ç›®ä¸“ä¸ºç”Ÿäº§ç¯å¢ƒè®¾è®¡ï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

- PoWA å·²ç»éƒ¨ç½²
- å›¢é˜Ÿå¸Œæœ›è·å¾— **ä¸»åŠ¨æ„ŸçŸ¥**ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨æ£€æŸ¥ä»ªè¡¨ç›˜
- å®‰å…¨æ€§ã€ç¨³å®šæ€§å’Œä½è¿ç»´é£é™©è‡³å…³é‡è¦

---

## ä¸»è¦ç‰¹æ€§

- ğŸ“Š åˆ†æ PoWA èšåˆæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯
- â± æ£€æµ‹æ…¢æŸ¥è¯¢ã€æ€§èƒ½è¡°é€€å’Œå¼‚å¸¸å·¥ä½œè´Ÿè½½å˜åŒ–
- ğŸ’¡ **ä¸»åŠ¨ç´¢å¼•å»ºè®®**ï¼ˆé€šè¿‡è¢«åŠ¨åˆ†æ `pg_qualstats`ï¼‰
- ğŸ–¥ **åŸºäºèµ„æºçš„å‘Šè­¦**ï¼ˆCPU/IOï¼Œå¦‚æœé›†æˆäº† `pg_stat_kcache`ï¼‰
- ğŸ“¨ æ¨é€æ´å¯Ÿåˆ°ä¼ä¸šå¾®ä¿¡ï¼ˆå¯æ‰©å±•è‡³å…¶ä»–æ¸ é“ï¼‰
- ğŸ” å¯¹ PoWA æ•°æ®çš„åªè¯»è®¿é—®
- ğŸ§© éä¾µå…¥å¼ï¼Œä¸ PoWA æ ¸å¿ƒè§£è€¦

---

## è®¾è®¡åŸåˆ™

- **é»˜è®¤åªè¯»**  
  æœåŠ¡ä»ä¸ä¿®æ”¹æ•°æ®åº“çŠ¶æ€æˆ–æ‰§è¡Œæ§åˆ¶æ“ä½œã€‚

- **Sidecar æ¶æ„**  
  powa-sentinel ç‹¬ç«‹è¿è¡Œï¼Œä¸å½±å“ PoWA çš„å¯ç”¨æ€§ã€‚

- **æ´å¯Ÿé©±åŠ¨çš„é€šçŸ¥**  
  é€šçŸ¥å…³æ³¨è¶‹åŠ¿å’Œç»“è®ºï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®è½¬å‚¨ã€‚

- **ç”Ÿäº§å‹å¥½**  
  å•äºŒè¿›åˆ¶æ–‡ä»¶éƒ¨ç½²ï¼Œä¾èµ–æå°‘ï¼Œæ˜“äºæ“ä½œã€‚

---

## æ¶æ„æ¦‚è§ˆ

```
PostgreSQL
|
|  pg_stat_statements
v
PoWA (èšåˆä¸åˆ†æ)
|
|  åªè¯»è®¿é—®
v
powa-sentinel
|
v
é€šçŸ¥æ¸ é“ (ä¼ä¸šå¾®ä¿¡, Webhook, Emailâ€¦)
```

æ­¤å¤„ *PostgreSQL* æŒ‡ PoWA é‡‡é›†æ•°æ®çš„å®ä¾‹ï¼›å•æœºéƒ¨ç½²æ—¶ä¹Ÿæ˜¯ä»“åº“åº“ã€‚

## æ–‡æ¡£

å®Œæ•´ç´¢å¼•è§ [docs/README_zh-CN.md](./docs/README_zh-CN.md)ã€‚

**å¿«é€Ÿé“¾æ¥**ï¼š[å¿«é€Ÿå¼€å§‹](./docs/zh-CN/getting-started/quickstart.md) | [éƒ¨ç½²](./docs/zh-CN/guides/deployment.md) | [è´¡çŒ®](./docs/zh-CN/guides/contributing.md)

## å¿«é€Ÿå¼€å§‹

> âš ï¸ éœ€å·²å®‰è£… PoWAã€‚è¯¦è§ [å‰ç½®æ¡ä»¶](./docs/zh-CN/getting-started/prerequisites.md)ã€‚

```bash
# åˆ›å»º config.yamlï¼ˆè§æ–‡æ¡£ï¼‰ï¼Œç„¶åï¼š
docker run -d --restart unless-stopped -p 8080:8080 -v $(pwd)/config.yaml:/config.yaml ghcr.io/nesnilnehc/powa-sentinel:latest
curl http://localhost:8080/healthz
```

---

## çŠ¶æ€

æœ¬é¡¹ç›®å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µã€‚
APIã€é…ç½®æ ¼å¼å’Œè§„åˆ™å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚

æ¬¢è¿è´¡çŒ®å’Œè®¨è®ºã€‚

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ PostgreSQL è®¸å¯è¯ã€‚
è¯¦æƒ…è¯·å‚é˜… [LICENSE](./LICENSE) æ–‡ä»¶ã€‚
